---
title: Hugo中文文档 在Netlify上托管部署Hugo站点
linktitle: Netlify 托管
description: Netlify可以托管Hugo站点, Netlify提供了CDN、持续部署、一键https、管理图形界面和Netlify自己的命令行界面.
date: 2017-02-01
publishdate: 2017-02-01
lastmod: 2017-03-11
categories: [hosting and deployment]
keywords: [netlify,hosting,deployment]
authors: [Ryan Watters, Seth MacLeod]
menu:
  docs:
    parent: "hosting-and-deployment"
    weight: 10
weight: 10
sections_weight: 10
draft: false
aliases: []
toc: true
---

[Netlify][netlify] provides continuous deployment services, global CDN, ultra-fast DNS, atomic deploys, instant cache invalidation, one-click SSL, a browser-based interface, a CLI, and many other features for managing your Hugo website.
[Netlify][netlify] 提供的服务包括持续部署服务、全球CDN、超级快速DNS、原子部署、即时缓存验证、一键SSL证书、基于浏览器的界面、命令行界面以及其他很多管理hugo站点的特性服务.

## 前提条件

* 有GitHub, GitLab, 或者 Bitbucket 账户
* 完成了快速开始[Quick Start][] 或者已经拥有了想要与世界分享的准备部署的Hugo站点
* 还没有netlify账号

## 创建Netlify账户

Go to [app.netlify.com][] and select your preferred signup method. This will likely be a hosted Git provider, although you also have the option to sign up with an email address.
浏览器打开 [app.netlify.com][], 选择自己喜欢的注册方法。 通常这会是一个托管的GIT服务的站点账号, 当让您页可以选择使用邮件地址来注册.

The following examples use GitHub, but other git providers will follow a similar process.
下面例子使用Github, 使用其他git服务商的账号的注册过程会类似过程

![app.netlify.com 首页截图, 包含流行的git解决方案服务的链接](/images/hosting-and-deployment/hosting-on-netlify/netlify-signup.jpg)


Selecting GitHub will bring up an authorization modal for authentication. Select "Authorize application."
选择Github会调出github的验证授权模态对话框, 选择"Authorize application."

![Netlify 和 GitHub 授权截图](/images/hosting-and-deployment/hosting-on-netlify/netlify-first-authorize.jpg)

## 创建可以持续部署的新站点

You're now already a Netlify member and should be brought to your new dashboard. Select "New site from git."
现在拥有了Netlify账户, 授权后应该会被导向您的netlify操作面板. 选择"New site from git."

![Netlify没有在建站点的空白管理面板的截图、突出显示的'add new site'按钮](/images/hosting-and-deployment/hosting-on-netlify/netlify-add-new-site.jpg)

Netlify will then start walking you through the steps necessary for continuous deployment. First, you'll need to select your git provider again, but this time you are giving Netlify added permissions to your repositories.
然后Netlify会引导您完成连续部署的必须步骤. 首先，再次选择您的git服务商, 不过这次为了给您的项目存储库添加netlify的访问权限。

![步骤1截图 在netlify创建新站点、选择git服务商](/images/hosting-and-deployment/hosting-on-netlify/netlify-create-new-site-step-1.jpg)

And then again with the GitHub authorization modal:
再一次看到Github授权模态框:

![步骤1截图 在netlify创建新站点、添加授权](/images/hosting-and-deployment/hosting-on-netlify/netlify-authorize-added-permissions.jpg)

Select the repo you want to use for continuous deployment. If you have a large number of repositories, you can filter through them in real time using repo search:
选择需要持续部署的repo资源库。如果您有好多项目，可以通过查询实时过滤他们:

![步骤1截图 在netlify创建新站点 选择git资源库](/images/hosting-and-deployment/hosting-on-netlify/netlify-create-new-site-step-2.jpg)

资源库选择好之后, netlify将你导航到基础设置的屏幕. 此处可以选择将要发布的git分支，设置您的[build command][]构建命令, 您的发布(部署)目录. 发布目录应该与您在[site configuration][config]站点配置中设置的目录一致,默认是`public`. 后续步骤假设您在发布`master`代码分支.

## 在netlify中设置您的Hugo版本

可以通过在`netlify.toml`文件中为您的环境[设置Hugo版本](https://www.netlify.com/blog/2017/04/11/netlify-plus-hugo-0.20-and-beyond/)或者在netlify的命令行中设置`HUGO_VERSION`构建环境变量


为生产环境设置:

```
[context.production.environment]
  HUGO_VERSION = "0.53"
```

为测试环境:

```
[context.deploy-preview.environment]
  HUGO_VERSION = "0.53"
```

The Netlify configuration file can be a little hard to understand and get right for the different environment, and you may get some inspiration and tips from this site's `netlify.toml`:
Netlify配置文件理解起来有点难,为不同环境设置正确也有点难. 可以从下面的站点`netlify`文件获得一点启发和提示:

{{< code file="netlify.toml" nocode="true" >}}
{{< readfile file="netlify.toml" highlight="toml" >}}
{{< /code >}}

## 构建和部署站点

In the Netlify console, selecting "Deploy site" will immediately take you to a terminal for your build:.
在netlify终端, 选择 "Deploy site"会马上将您带到部署的终端:

![部署站点到netlify的动画,包含构建的终端输出](/images/hosting-and-deployment/hosting-on-netlify/netlify-deploying-site.gif)

Once the build is finished---this should only take a few seconds--you should now see a "Hero Card" at the top of your screen letting you know the deployment is successful. The Hero Card is the first element that you see in most pages. It allows you to see a quick summary of the page and gives access to the most common/pertinent actions and information. You'll see that the URL is automatically generated by Netlify. You can update the URL in "Settings."
构建完成时---这仅仅需要几秒---您会在屏幕顶部看到“英雄卡片”通知您部署成功. 英雄卡片会是在大多数页面中看到的第一个元素. 卡片允许查看页面的快速摘要, 访问大多数通常的/相关的动作和信息。Netlify会自动生成URL。您可以在 "Settings."中更新URL.

![在Netlify管理界面的部署屏幕的顶部的胜利部署勋章的截图.](/images/hosting-and-deployment/hosting-on-netlify/netlify-deploy-published.jpg)

![https://hugo-netlify-example.netlify.com 主页截图, 大部分是无意义文本](/images/hosting-and-deployment/hosting-on-netlify/netlify-live-site.jpg)

[访问展示站点 Visit the live site][visit].

Now every time you push changes to your hosted git repository, Netlify will rebuild and redeploy your site.
现在，每次您更新您的托管的git代码库,Netlify会重新构建并重新部署您的站点.

参考 [这篇博文](https://www.netlify.com/blog/2017/04/11/netlify-plus-hugo-0.20-and-beyond/) 获得Netlify处理Hugo版本的更详细信息.

## 在netlify平台上使用Hugo 主题样式

The [`git clone` method for installing themes][installthemes] is not supported by Netlify. If you were to use `git clone`, it would require you to recursively remove the `.git` subdirectory from the theme folder and would therefore prevent compatibility with future versions of the theme.
Netlify平台上Hugo不支持[`git clone` 方法安装主题样式][installthemes]. 如果使用了`git clone`, Netlify会要求您递归删除主题目录theme中的`.git` 子目录, 因此组织了主题未来版本的兼容性.

A *better* approach is to install a theme as a proper git submodule. You can [read the GitHub documentation for submodules][ghsm] or those found on [Git's website][gitsm] for more information, but the command is similar to that of `git clone`:
*更佳* 的方法是通过git submodule来安装theme. 参考[GitHub submodules文档][ghsm]或者[Git 网站][gitsm]获得更多信息, 命令同`git clone`类似:

```
cd themes
git submodule add https://github.com/<THEMECREATOR>/<THEMENAME>
```

It is recommended to only use stable versions of a theme (if it’s versioned) and always check the changelog. This can be done by checking out a specific release within the theme's directory.
建议您只使用主题的稳定版本(如果有版本号的话)并且总是查看变化日志. 可以在theme的目录内检出特定版本来来查看.

Switch to the theme's directory and list all available versions:
转到主题目录，列出所有版本:

```
cd themes/<theme>
git tag
# exit with q
```

检出特定版本如下:

```
git checkout tags/<version-name>
```

You can update a theme to the latest version by executing the following command in the *root* directory of your project:
在项目的 *根* 目录下执行如下命令更新主题到最新版本:

```
git submodule update --rebase --remote
```

## 后续 Next Steps

You now have a live website served over https, distributed through CDN, and configured for continuous deployment. Dig deeper into the Netlify documentation:
现在您具有一个https服务、通过CDN分发、配置成持续部署的鲜活站点。现在可以看看Netlify的如下文档:

1. [定制域名][Using a Custom Domain]
2. [为定制域名配置HTTPS][httpscustom]
3. [重定向和重写规则][Redirects and Rewrite Rules]


[app.netlify.com]: https://app.netlify.com
[build command]: /getting-started/usage/#the-hugo-command
[config]: /getting-started/configuration/
[ghsm]: https://github.com/blog/2104-working-with-submodules
[gitsm]: https://git-scm.com/book/en/v2/Git-Tools-Submodules
[httpscustom]: https://www.netlify.com/docs/ssl/
[hugoversions]: https://github.com/netlify/build-image/blob/master/Dockerfile#L216
[installthemes]: /themes/installing/
[netlify]: https://www.netlify.com/
[netlifysignup]: https://app.netlify.com/signup
[Quick Start]: /getting-started/quick-start/
[Redirects and Rewrite Rules]: https://www.netlify.com/docs/redirects/
[Using a Custom Domain]: https://www.netlify.com/docs/custom-domains/
[visit]: https://hugo-netlify-example.netlify.com
