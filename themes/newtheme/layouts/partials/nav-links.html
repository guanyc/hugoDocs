{{ $currentPage := . }}
{{ $.Scratch.Add "listlinkClasses" "text-sm link text-steel-900  hover-white block brand-font  ma0 w-full pv3 px-4" }}

<!-- TODO: Not getting ismenucurrent -->

<ul class="list-reset inline-block ph0 ma0 scrolling-touch text-center">
  {{ range .Site.Menus.main }}
    <li  class="lg:text-left inline-block ma0 hover-bg-black w-full{{ if .HasChildren }} dont-display-child-until-click{{end}}">

      {{ if .HasChildren }}
        <a href="#{{ .Name | urlize }}" class="uppercase {{ $.Scratch.Get "listlinkClasses" }}{{if $currentPage.IsMenuCurrent   "main" . }} o-50{{end}}">
          {{ .Name }}
          <!-- <img src="/images/ic_keyboard_arrow_down_white_24px.svg" alt="" class="static v-mid text-sm ma0 pa0"> -->
        </a>
        <ul id="{{ .Name | urlize}}" class="list-reset pa0 ma0">
          <li class="ma0 pl3 brand-font">
            <a href="{{.URL}}" class="{{ $.Scratch.Get "listlinkClasses" }}{{if $currentPage.IsMenuCurrent "main" . }} o-50{{end}}">
              {{ .Name }} Overview
            </a>
          </li>
          {{ range .Children }}
            <li class="ma0 pl3 brand-font{{if $currentPage.IsMenuCurrent "main" . }} o-50{{end}}">
              <a href="{{.URL}}" class="{{ $.Scratch.Get "listlinkClasses" }}">
                {{ .Name }}
              </a>
            </li>
          {{ end }}
        </ul>
      {{ else }}
        <a href="{{.URL}}" class="uppercase {{ $.Scratch.Get "listlinkClasses" }}{{if $currentPage.IsMenuCurrent "main" . }} bg-steel-500{{end}}">
          {{ .Name }}
        </a>
      {{end}}

    </li>
  {{end}}
</ul>
