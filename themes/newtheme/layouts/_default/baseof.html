<!DOCTYPE html>
<html class="no-js" lang="{{ with $.Site.LanguageCode }}{{ . }}{{ else }}en-us{{ end }}">
  <head>
    <meta charset="utf-8">
    {{/* TODO1 self host https://fonts.google.com/specimen/Mulish?preview.text_type=custom */}}
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@200;400;800&display=swap" rel="stylesheet">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    {{/* NOTE: the Site's title, and if there is a page title, that is set too */}}
    <title>
      {{ block "title" . }}{{ with .Title }}{{ . }} | {{ end }}{{ .Site.Title }}{{ end }}
    </title>
    
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    {{ hugo.Generator }}
    
    {{ if eq (getenv "HUGO_ENV") "production" | or (eq .Site.Params.env "production")  }}
      <meta name="robots" content="index, follow">
    {{ else }}
      <meta name="robots" content="noindex, nofollow">
    {{ end }}
    
    {{ range .AlternativeOutputFormats -}}
      <link rel="{{ .Rel }}" type="{{ .MediaType.Type }}" href="{{ .Permalink | safeURL }}">
    {{ end -}}
    
    {{ $isDev := eq hugo.Environment "development" }}
    {{ $stylesheet := resources.Get "output/css/app.css"  }}
    {{ if not $isDev }}
      {{ $stylesheet = $stylesheet | minify | fingerprint }}
    {{ end }}
    {{ with $stylesheet }}
      {{ if $isDev }}
        <link rel="stylesheet" href="{{ .RelPermalink }}" crossorigin="anonymous">
      {{ else }}
        <link rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}" crossorigin="anonymous">
      {{ end }}
      {{ $.Scratch.Set "stylesheet" . }}
    {{end}}
    
    {{/* styles */}}
    {{ $options := dict "inlineImports" true }}
    {{ $styles := resources.Get "css/styles.css" }}
    {{ $styles = $styles | resources.PostCSS $options }}
    {{ if  hugo.IsProduction  }}
      {{ $styles = $styles | minify | fingerprint | resources.PostProcess }}
      <link href="{{ $styles.RelPermalink }}" rel="stylesheet" integrity="{{ .Data.Integrity }}" crossorigin="anonymous"/>
    {{ else }}
      <link href="{{ $styles.RelPermalink }}" rel="stylesheet" crossorigin="anonymous" />
    {{ end }}
    
    <meta name="description"
  content="{{ with .Description }}{{ . }}{{ else }}{{ with .Site.Params.description }}{{ . }}{{ end }}{{ end }}">
    
    {{ block "scripts" . }}
      {{- partial "site-scripts.html" . -}}
    {{ end }}
    {{ partial "site-manifest.html" . }}
    {{- partial "head-additions.html" . -}}
    {{- template "_internal/opengraph.html" . -}}
    {{- template "_internal/schema.html" . -}}
    {{- template "_internal/twitter_cards.html" . -}}
    
    {{ if hugo.IsProduction  }}
      {{ partial "gtag" . }}
    {{ end }}
    
  </head>
  
  <body class="m-0 font-sans bg-limegreen-50{{ with getenv "HUGO_ENV" }} {{ . }}{{ end }}">
    {{ block "nav" . }}
      {{ partial "site-nav.html" . }}
    {{ end }}
    {{ block "header" . }}{{ end }}
    <main role="main" class="content-with-sidebar min-h-screen pb-7 sm:pb-0">
      {{ block "main" . }}{{ end }}
    </main>
    
    {{ block "footer" . }}
      {{ partialCached "site-footer.html" . }}
    {{ end }}
    
  </body>
  
</html>
